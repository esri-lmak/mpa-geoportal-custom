// COPYRIGHT Â© 201 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/3.30/esri/copyright.txt for details.

define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/ObjectUtil"],function(o,r,e){function t(o){return r.isLightColor(o)?"#666666":"#BBBBBB"}function l(o){var e=r.isLightColor(o);return r.transform(o,{dv:e?-7:7}).toHex()}var a={getPanelTitleColor:function(o){var e=r.isLightColor(o);return r.transform(o,{dv:e?-50:50}).toHex()},getChartElementBackgroundColor:function(o){var e=r.isLightColor(o);return r.transform(o,{dv:e?-13:13}).toHex()}},n={};n.getThemeColors=function(o){return[o.document.backgroundColor,o.icon.backgroundColor,o.highlightedIcon.backgroundColor]},n.generateChartColors=function(o,e,t){t=t||{};var l=t.gradientFactor||1,a=[e,r.transform(e,{dv:-20*l}).toHex(),r.transform(e,{dv:-40*l}).toHex(),r.transform(e,{dv:-50*l}).toHex(),r.transform(e,{dv:-55*l}).toHex(),r.transform(e,{dv:-60*l}).toHex(),r.transform(e,{dv:-65*l}).toHex(),r.transform(e,{dv:-70*l}).toHex()];if(t.numLighterColors)for(var n=0;n<t.numLighterColors;n++)a.unshift(r.transform(e,{dv:20*l*(n+1),ds:-20*(n+1)}).toHex());o&&o!==e&&a.unshift(o);var i={};return a.filter(function(o){return!i[o]&&(i[o]=!0,!0)})},n.applyThemeColorsToTheme=function(o){var i=o.theme,c=o.colors,d=o.preserveForegroundColor,s=o.chartColors,g=o.colors3series,u=o.preprocessGeneratedThemeFunc,C=c[0],b=c[1],f=c[2],h=d&&i.chart&&i.chart.dataLabelsStyle&&i.chart.dataLabelsStyle.color||r.getContrastColor(C).toHex(),y=d&&i.document.color||("#FFFFFF"===C.toUpperCase()?"#4C4C4C":h),S=r.isLightColor(C),m=a.getChartElementBackgroundColor(C),v=a.getPanelTitleColor(C),x=r.transform(C,{dv:S?-33:33}).toHex(),p={document:{color:y,backgroundColor:C,border:{color:x}},icon:{backgroundColor:b},highlightedIcon:{backgroundColor:f},table:{overrideStyles:{Default:{color:y,backgroundColor:"transparent"},TableHeader:{color:r.getContrastColor(b,void 0,void 0,200).toHex(),backgroundColor:b},AlternatingRow:{color:y,backgroundColor:r.transform(C,{dv:S?-7:7}).toHex()},ReportTitle:{color:f,backgroundColor:"transparent"},GreyText:{color:x,backgroundColor:"transparent"},BlueText:{color:"#56A5D8",backgroundColor:"transparent"}}},chart:{backgroundColor:"transparent",dataLabelsAltColor:h,titleStyle:{color:v},dataLabelsStyle:{color:h},xAxis:{lineColor:h,gridLinesColor:h,gridStripesColor:l(C),gridStripesColorAlt:"transparent",axisStyle:{color:h},titleStyle:{color:h}},yAxis:{lineColor:h,gridLinesColor:h,gridStripesColor:l(C),gridStripesColorAlt:"transparent",baseLineColor:h,axisStyle:{color:h},titleStyle:{color:h}},legendStyle:{color:h,backgroundColor:"transparent"},minMaxLegend:{titleStyle:{color:h}},ring:{ringBackground:{backgroundColor:m}},gauge:{dataLabelStyle:{color:b},othersColor:m,arrowIndicator:{lineColor:v,backgroundColor:v}},waffle:{dataValueStyle:{color:b},dataLabelStyle:{color:b},othersColor:m},icon:{backgroundColor:b},columnBarBackground:{backgroundColor:m},comparisonInfo:{lineColor:t(C)}},infographic:{backgroundColor:"transparent",agePyramid:{theme:S?"light":"common",male:{backgroundColor:b},female:{backgroundColor:f}},staticInfographic:{backgroundColor:"transparent",icon:{backgroundColor:b},highlightedIcon:{backgroundColor:f},iconBarBackground:{},titleLine:{color:r.transform(C,{dv:S?-40:40}).toHex()},titleStyle:{color:v},variableLabelStyle:{color:b},variableLabelStyleHighlighted:{color:f},variableLabelStyleContrast:{color:C},variableDescriptionStyle:{color:r.transform(C,{dv:S?-50:50}).toHex()}}}};u&&u(p),e.populateObject(i,p,!0),i.chart.colors=s&&s.length?s:n.generateChartColors(b,f),i.chart.colors3series=g},n.applyTextStyleToTheme=function(r,t){function l(r,e){var l=o.mixin({},t);return r&&delete l.color,e||delete l.fontSize,l}t=n.filterTextStyles(t);var a={document:l(!1,!0),table:{overrideStyles:{Default:l(!1,!0),TableHeader:l(!1,!0),AlternatingRow:l(!1,!0),ReportTitle:l(!1,!0),GreyText:l(!1,!0),BlueText:l(!1,!0)}},chart:{titleStyle:l(),dataLabelsStyle:l(),xAxis:{axisStyle:l(),titleStyle:l()},yAxis:{axisStyle:l(),titleStyle:l()},legendStyle:l(),minMaxLegend:{titleStyle:l(),minVariableLabelStyle:l(!0),maxVariableLabelStyle:l(!0)},gauge:{dataLabelStyle:l()},waffle:{dataValueStyle:l(),dataLabelStyle:l()}},infographic:{staticInfographic:{titleStyle:l(),variableLabelStyle:l(),variableLabelStyleHighlighted:l(),variableLabelStyleContrast:l(),variableDescriptionStyle:l()}}};e.populateObject(r,a,!0)};var i={fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,textDecoration:1,color:1};return n.filterTextStyles=function(o){var r={};for(var e in i){var t=o[e];void 0!==t&&(r[e]=t)}return r},n});